<!DOCTYPE html>
<html>
        <head><title>ElementFactory</title><link rel="stylesheet" href="../screen.css" type="text/css" media="screen, projection"></link><link rel="stylesheet" href="../print.css" type="text/css" media="print"></link><!--[if lt IE 8]><link rel="stylesheet" href="../ie.css" type="text/css" media="screen, projection"><![endif]--><link href="../prettify.css" rel="stylesheet" type="text/css"></link><script type="text/javascript" src="../prettify.js"></script><style> 
        /* Overriding a few defaults from blueprint. */
        body {
          background:#43180D;
          font-size:100%; color: #f2e5ca;
          font-family: Times, serif;
        }
        h1, h2, h3, h4, h5, h6 {
          font-weight:normal;font-family: Georgia, Times, serif;
          color: #f2e5ca;
        }
        /* 3, 2, 1.5, 1.2 */
        h1 {font-size:3em;line-height:1;margin-bottom:0.5em;}
        h2 {font-size:2em;margin-bottom:0.75em;}
        h3 {font-size:1.5em;line-height:1;margin-bottom:1em;}
        h4 {font-size:1em;line-height:1.25;margin-bottom:1.25em;}
        h5 {font-size:1em;font-weight:bold;margin-bottom:1.5em;}
        h6 {font-size:1em;font-weight:bold;}
        
        a:focus, a:hover {color: #CEA162; text-decoration: underline; }
        a {color:#CEA162;text-decoration:none;}

        code { text-transform: none; }

        /* Style the code blocks */
        pre {
          color: #f2e5ca;
          border: solid #180A07 1px;
          border-right: 0;
          border-left-width: 1em;
          padding-left: 1em;
        }
        .str { color:rgb( 237, 239, 125 ); font-style:italic }
        .kwd { color:rgb( 152, 129, 85 ); }
        .com { color:#999 }
        .typ { color:rgb( 255, 101, 33 ); }
        .lit { color:rgb( 112, 83, 147 ); }
        .pun { color:#aaa; font-weight:bold  }
        .pln { color:#f2e5ca }
        .tag { color:rgb( 137, 150, 168 ); font-weight:bold  }
        .atn { color:#939; font-weight:bold  }
        .atv { color:#181 }
        .dec { color:#606 }

        /* Custom styling */
        .container { float: left; margin-top: 0em; } /* 7f2f18 */
        .header { color: #f2e5ca; 
          text-transform:uppercase; margin-bottom: 2em; vertical-align: center;
        }
        a:focus, a:hover {  background: #43180D; }
        .header ul { list-style-type: none; margin: 0; padding: 0; }
        .header ul li { display: inline; padding-right: 2em; }

        .nav .current { background: #43180D; border-left: .3em solid #000; }
    		.nav li { padding-left: .3em; padding-right: 3px; }
    		.nav hr { background: #43180D; }
    		
    		hr { background: #000; }
         </style></head>
        <body onload="prettyPrint()" class="container"><div class="section">
      <div class="header span-22 prepend-1 append-1 last">
      <ul style="list-style-type: none">
            <li><a href="../../..">tristan hunt.com</a></li>
            <li>knockoff</li>
        </ul>
    </div>
      <div class="nav small span-7 prepend-1"><ul id="tabs">
      <li class="current">Documentation</li>
      <li>
        <a href="../com/tristanhunt/knockoff/ColoredLogger.scala.html">Sources</a></li>
    </ul><hr></hr><ul><li >
            <a href="../01-Introduction.html">
              Welcome to Knockoff
            </a>
          </li><li>
            <span class="group">Usage</span>
            <ul>
              <li >
            <a href="../10-Usage/01-Getting_Started.html">
              Getting Started
            </a>
          </li><li >
            <a href="../10-Usage/02-Recipes.html">
              Recipes
            </a>
          </li><li >
            <a href="../10-Usage/50-Variations.html">
              Where Knockoff is not like Markdown
            </a>
          </li>
            </ul>
          </li><li>
            <span class="group">Implementation</span>
            <ul>
              <li >
            <a href="../30-Implementation/01-Discounter_DefaultDiscounter_Wholesaler.html">
              Discounter and the Wholesaler
            </a>
          </li><li >
            <a href="../30-Implementation/02-Block_Elements.html">
              Block Elements
            </a>
          </li><li >
            <a href="../30-Implementation/03-Span_Elements.html">
              Spanning Elements
            </a>
          </li><li class="current">
            <a href="../30-Implementation/04-ElementFactory.html">
              ElementFactory
            </a>
          </li><li>
            <span class="group">Parsing</span>
            <ul>
              <li >
            <a href="../30-Implementation/10-Parsing/01-Parsing.html">
              Parsing Overview
            </a>
          </li><li >
            <a href="../30-Implementation/10-Parsing/10-ChunkStreamFactory.html">
              ChunkStreamFactory
            </a>
          </li><li >
            <a href="../30-Implementation/10-Parsing/11-ChunkParsers.html">
              ChunkParsers
            </a>
          </li><li >
            <a href="../30-Implementation/10-Parsing/12-Chunk_Types.html">
              Chunk Types
            </a>
          </li><li >
            <a href="../30-Implementation/10-Parsing/20-Span_Conversion.html">
              Span Conversion
            </a>
          </li>
            </ul>
          </li><li>
            <span class="group">Extras</span>
            <ul>
              <li >
            <a href="../30-Implementation/30-Extras/02-MetaDataConverter.html">
              MetaData and MetaDataConverter
            </a>
          </li>
            </ul>
          </li><li >
            <a href="../30-Implementation/50-Official_Markdown_Tests.html">
              The Official Tests
            </a>
          </li><li>
            <span class="group">Utilities</span>
            <ul>
              <li >
            <a href="../30-Implementation/80-Utilities/01-String_Extras.html">
              StringExtras
            </a>
          </li><li >
            <a href="../30-Implementation/80-Utilities/02-ColoredLogger.html">
              ColoredLogger
            </a>
          </li>
            </ul>
          </li>
            </ul>
          </li></ul></div>
      <div class="article span-13 prepend-1 last"><h1><code>ElementFactory</code></h1><p>Defines constructor methods used to build each of the elements in knockoff. This
can then be easily overriden by specialized versions of the block or span elements,
so that the output <code>BlockSeq</code> might render things a bit differently, for example.
</p><h2><code>HasElementFactory</code></h2><p>For any <code>Discounter</code>, there should really only be one, configurable,
<code>ElementFactory</code> instance. And for the things that need to fetch that instance,
there is the <code>HasElementFactory</code> trait.
</p><pre><code class="prettyprint">// In com/tristanhunt/knockoff/HasElementFactory.scala
package com.tristanhunt.knockoff

trait HasElementFactory {

    def elementFactory : ElementFactory = defaultElementFactory
    
    private val defaultElementFactory = new ElementFactory
}
</code></pre><p>Note that the top-level element, <code>Discounter</code>, maintains this reference as well. So
customizing the <code>ElementFactory</code> is pretty simple. You create a subtype of
<code>ElementFactory</code>, then override that in your custom <code>Discounter</code> instance:
</p><pre><code class="prettyprint">// Your custom ElementFactory

// You probably want something like this to bind in prettification in your
// HTML documents...
class MyCodeSpan( content : String ) extends CodeSpan( content ) {
  override def = &lt;code class=&quot;myCodeClass&quot;&gt;{ content }&lt;/code&gt;
}

class MyElementFactory extends ElementFactory {
  override def codeSpan( c : String ) = new MyCodeSpan( c )
}

class MyDiscounter extends Discounter {
  override val elementFactory = new MyElementFactory
}
</code></pre><h3><code>ElementFactory</code></h3><pre><code class="prettyprint">// In com/tristanhunt/knockoff/ElementFactory.scala
// See the ElementFactory package and imports

class ElementFactory {

  // Block Elements
  
  def para( s : SpanSeq, p : Position ) =
    new Paragraph( s, p )
  
  def head( l : Int, s : SpanSeq, p : Position ) =
    new Header( l, s, p )
    
  def hr( p : Position ) =
    new HorizontalRule( p )
  
  def linkdef( i : String, u : String, t : Option[ String ], p : Position ) =
    new LinkDefinition( i, u, t, p )
  
  def blockquote( c : Seq[ Block ], p : Position ) : Blockquote =
    new Blockquote( c, p )
  
  def codeBlock( s : String, p : Position ) : CodeBlock =
    codeBlock( text(s), p )
  
  def codeBlock( t : Text, p : Position ) : CodeBlock =
    new CodeBlock( t, p )
  
  def olist( olis : OrderedItem * ) : OrderedList =
    new OrderedList( olis )
  
  def ulist( ulis : UnorderedItem * ) : UnorderedList =
    new UnorderedList( ulis )
  
  def uli( b : Block, p : Position ) : UnorderedItem =
    new UnorderedItem( b, p )

  def uli( bs : Seq[ Block ], p : Position ) : UnorderedItem =
    new UnorderedItem( bs, p )

  def oli( b : Block, p : Position ) : OrderedItem =
    new OrderedItem( b, p )

  def oli( bs : Seq[ Block ], p : Position ) : OrderedItem =
    new OrderedItem( bs, p )
  
  
  // Span Elements
  
  def text( c : String ) = new Text( c )
  
  /** A shorthand for text (popular with my tests) */
  def t( c : String ) = text( c )
  
  def em( s : Seq[ Span ] ) : Emphasis =
    new Emphasis( s )
  
  def strong( s : Seq[ Span ] ) : Strong =
    new Strong( s )
  
  def link( c : SpanSeq, u : String, t : Option[ String ] ) : Link =
    new Link( c, u, t )
  
  def link( c : SpanSeq, u : String ) : Link = link( c, u, None )
  
  def link( c : SpanSeq, ld : LinkDefinition ) : IndirectLink =
    new IndirectLink( c, ld )
  
  def ilink( c : SpanSeq, u : String, t : Option[ String ] ) : ImageLink =
    new ImageLink( c, u, t )
  
  def ilink( c : SpanSeq, u : String ) : ImageLink = ilink( c, u )
  
  def ilink( c : SpanSeq, ld : LinkDefinition ) : IndirectImageLink =
    new IndirectImageLink( c, ld )
  
  def codeSpan( c : String ) : CodeSpan =
    new CodeSpan( c )
  
  def htmlSpan( h : String ) : HTMLSpan =
    new HTMLSpan( h )
  
  
  // Uh... fun with my object model?
  
  def toSpan( seq : Seq[ Span ] ) : Span =
    if ( seq.length == 1 ) seq.first else new GroupSpan( seq )
}
</code></pre><p>I used heavy abbreviation in this class in order to draw focus to the types.
</p><h4><code>ElementFactory</code> - Package and Imports</h4><pre><code class="prettyprint">// The ElementFactory package and imports
package com.tristanhunt.knockoff

import scala.io.Source
import scala.util.parsing.input.Position
</code></pre></div>
      <div class="footer span-22 prepend-1 append-1 last">
      
    </div>
    </div></body>
      </html>